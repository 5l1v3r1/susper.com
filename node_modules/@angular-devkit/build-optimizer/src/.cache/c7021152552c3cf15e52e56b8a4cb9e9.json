{"remainingRequest":"/home/travis/build/fossasia/susper.com/repo/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/home/travis/build/fossasia/susper.com/repo/node_modules/@ngrx/store-devtools/src/extension.js","dependencies":[{"path":"/home/travis/build/fossasia/susper.com/repo/node_modules/@ngrx/store-devtools/src/extension.js","mtime":1490359185000},{"path":"/home/travis/build/fossasia/susper.com/repo/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/home/travis/build/fossasia/susper.com/repo/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import { OpaqueToken, Inject, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { empty } from 'rxjs/observable/empty';\nimport { filter } from 'rxjs/operator/filter';\nimport { map } from 'rxjs/operator/map';\nimport { share } from 'rxjs/operator/share';\nimport { switchMap } from 'rxjs/operator/switchMap';\nimport { takeUntil } from 'rxjs/operator/takeUntil';\nimport { applyOperators } from './utils';\nexport var ExtensionActionTypes = {\n    START: 'START',\n    DISPATCH: 'DISPATCH',\n    STOP: 'STOP',\n    ACTION: 'ACTION'\n};\nexport var REDUX_DEVTOOLS_EXTENSION = new OpaqueToken('Redux Devtools Extension');\nvar DevtoolsExtension = /*@__PURE__*/ (function () {\n    function DevtoolsExtension(devtoolsExtension) {\n        this.instanceId = \"ngrx-store-\" + Date.now();\n        this.devtoolsExtension = devtoolsExtension;\n        this.createActionStreams();\n    }\n    DevtoolsExtension.prototype.notify = function (action, state) {\n        if (!this.devtoolsExtension) {\n            return;\n        }\n        this.devtoolsExtension.send(null, state, false, this.instanceId);\n    };\n    DevtoolsExtension.prototype.createChangesObservable = function () {\n        var _this = this;\n        if (!this.devtoolsExtension) {\n            return empty();\n        }\n        return new Observable(function (subscriber) {\n            var connection = _this.devtoolsExtension.connect({ instanceId: _this.instanceId });\n            connection.subscribe(function (change) { return subscriber.next(change); });\n            return connection.unsubscribe;\n        });\n    };\n    DevtoolsExtension.prototype.createActionStreams = function () {\n        var _this = this;\n        // Listens to all changes based on our instanceId\n        var changes$ = share.call(this.createChangesObservable());\n        // Listen for the start action\n        var start$ = filter.call(changes$, function (change) { return change.type === ExtensionActionTypes.START; });\n        // Listen for the stop action\n        var stop$ = filter.call(changes$, function (change) { return change.type === ExtensionActionTypes.STOP; });\n        // Listen for lifted actions\n        var liftedActions$ = applyOperators(changes$, [\n            [filter, function (change) { return change.type === ExtensionActionTypes.DISPATCH; }],\n            [map, function (change) { return _this.unwrapAction(change.payload); }]\n        ]);\n        // Listen for unlifted actions\n        var actions$ = applyOperators(changes$, [\n            [filter, function (change) { return change.type === ExtensionActionTypes.ACTION; }],\n            [map, function (change) { return _this.unwrapAction(change.payload); }]\n        ]);\n        var actionsUntilStop$ = takeUntil.call(actions$, stop$);\n        var liftedUntilStop$ = takeUntil.call(liftedActions$, stop$);\n        // Only take the action sources between the start/stop events\n        this.actions$ = switchMap.call(start$, function () { return actionsUntilStop$; });\n        this.liftedActions$ = switchMap.call(start$, function () { return liftedUntilStop$; });\n    };\n    DevtoolsExtension.prototype.unwrapAction = function (action) {\n        return typeof action === 'string' ? eval(\"(\" + action + \")\") : action;\n    };\n    return DevtoolsExtension;\n}());\nexport { DevtoolsExtension };\n//# sourceMappingURL=extension.js.map \n",null]}